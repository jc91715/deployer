webpackJsonp([13],{cruN:function(e,t,r){var n=r("VU/8")(r("sS8C"),r("qsh7"),!1,null,null,null);e.exports=n.exports},qsh7:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-header",[r("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[r("el-submenu",{attrs:{index:"1"}},[r("template",{slot:"title"},[e._v("空间")]),e._v(" "),e._l(e.lists,function(t,n){return r("el-menu-item",{key:n,attrs:{index:"1-"+(n+1)},on:{click:function(r){return e.to_space(t.id)}}},[e._v(e._s(t.name))])})],2),e._v(" "),r("el-menu-item",{attrs:{index:"2"}},[r("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新建空间"),r("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),r("el-menu-item",{staticStyle:{float:"right"},attrs:{index:"3"}},[r("el-button",{attrs:{type:"text"},on:{click:e.logout}},[e._v("退出")])],1)],1)],1),e._v(" "),r("el-main",[r("el-dialog",{attrs:{title:"新建空间",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"空间名称","label-width":e.formLabelWidth,prop:"name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"空间详情","label-width":e.formLabelWidth,prop:"desc"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1),e._v(" "),r("router-view")],1)],1)},staticRenderFns:[]}},sS8C:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),o=r.n(n),i=r("htnI");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}t.default={data:function(){return{activeIndex:"1",formLabelWidth:"120px",dialogFormVisible:!1,rules:{name:[{required:!0,message:"请输入空间名称",trigger:"blur"}],desc:[{required:!0,message:"请输入空间描述",trigger:"blur"}]},form:{name:"",desc:""}}},computed:{lists:function(){return i.a.state.space.list}},beforeRouteEnter:function(){var e=a(o.a.mark(function e(t,r,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.dispatch("spaceFetch");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),methods:{handleSelect:function(e,t){console.log(e,t)},logout:function(){localStorage.removeItem("token"),this.$router.push({name:"login"})},to_space:function(e){this.$router.push({name:"spaces.show",params:{id:e}})},submitForm:function(){var e=a(o.a.mark(function e(t){var r,n,a,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,this.$refs[t].validate(function(e){if(!e)return!1;r=1}),r){e.next=4;break}return e.abrupt("return");case 4:return n=this.form,a=n.name,s=n.desc,e.prev=5,e.next=8,i.a.dispatch("spaceStore",{name:a,desc:s});case 8:return this.dialogFormVisible=!1,this.intForm(),e.next=12,i.a.dispatch("spaceFetch",{id:1});case 12:this.$message.success("创建成功"),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(5);case 17:case"end":return e.stop()}},e,this,[[5,15]])}));return function(t){return e.apply(this,arguments)}}(),intForm:function(){this.form={name:"",desc:""}}}}}});