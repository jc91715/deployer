webpackJsonp([10],{"/GkV":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("Xxa5"),s=r.n(n),o=r("htnI");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(s,o){try{var a=t[s](o),i=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(i).then(function(e){n("next",e)},function(e){n("throw",e)});e(i)}("next")})}}t.default={name:"Index",props:["id","project_id"],data:function(){return{dialogFormVisible:!1,formLabelWidth:"120px",form:{project_id:this.project_id,stage:"",hash:""},rules:{stage:[{required:!0,message:"请输入分支名字",trigger:"blur"}],hash:[{required:!0,message:"请输入hash",trigger:"blur"}]}}},computed:{lists:function(){return o.a.state.deployment.list},space:function(){return o.a.state.space.item},project:function(){return o.a.state.project.item}},beforeRouteEnter:function(){var e=a(s.a.mark(function e(t,r,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),created:function(){var e=a(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.dispatch("deploymentFetch",{space:this.id,project:this.project_id});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{submitForm:function(){var e=a(s.a.mark(function e(t){var r,n,a,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,this.$refs[t].validate(function(e){if(!e)return!1;r=1}),r){e.next=4;break}return e.abrupt("return");case 4:return n=this.form,a=n.project_id,i=n.stage,l=n.hash,e.next=7,o.a.dispatch("deploymentStore",{space:this.id,project_id:a,stage:i,hash:l});case 7:u=e.sent,console.log(u),this.$message.success("创建成功"),console.log(this.id),this.$router.push({name:"projects.deployments.show",params:{id:this.id,project_id:this.project_id,deployment_id:u.data.deployment.id}});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}},GxQW:function(e,t,r){var n=r("Pvdf");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r("rjj0")("babfe4d0",n,!0,{})},HYRF:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{attrs:{type:"text"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("发布"),r("i",{staticClass:"el-icon-plus"})]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.lists,height:"500",border:""}},[r("el-table-column",{attrs:{prop:"stage",label:"分支"}}),e._v(" "),r("el-table-column",{attrs:{prop:"hash",label:"hash"}}),e._v(" "),r("el-table-column",{attrs:{prop:"status",label:"状态"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")])]}}])})],1),e._v(" "),r("el-dialog",{attrs:{title:"新建发布",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{label:"分支","label-width":e.formLabelWidth,prop:"stage"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.stage,callback:function(t){e.$set(e.form,"stage",t)},expression:"form.stage"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"hash","label-width":e.formLabelWidth,prop:"hash"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.hash,callback:function(t){e.$set(e.form,"hash",t)},expression:"form.hash"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},Pvdf:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"",""])},rjj0:function(e,t,r){var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s=r("tTVk"),o={},a=n&&(document.head||document.getElementsByTagName("head")[0]),i=null,l=0,u=!1,c=function(){},d=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e){for(var t=0;t<e.length;t++){var r=e[t],n=o[r.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](r.parts[s]);for(;s<r.parts.length;s++)n.parts.push(v(r.parts[s]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(v(r.parts[s]));o[r.id]={id:r.id,refs:1,parts:a}}}}function m(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,r,n=document.querySelector("style["+f+'~="'+e.id+'"]');if(n){if(u)return c;n.parentNode.removeChild(n)}if(p){var s=l++;n=i||(i=m()),t=y.bind(null,n,s,!1),r=y.bind(null,n,s,!0)}else n=m(),t=function(e,t){var r=t.css,n=t.media,s=t.sourceMap;n&&e.setAttribute("media",n);d.ssrId&&e.setAttribute(f,t.id);s&&(r+="\n/*# sourceURL="+s.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}e.exports=function(e,t,r,n){u=r,d=n||{};var a=s(e,t);return h(a),function(t){for(var r=[],n=0;n<a.length;n++){var i=a[n];(l=o[i.id]).refs--,r.push(l)}t?h(a=s(e,t)):a=[];for(n=0;n<r.length;n++){var l;if(0===(l=r[n]).refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete o[l.id]}}}};var b,g=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function y(e,t,r,n){var s=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,s);else{var o=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},tTVk:function(e,t){e.exports=function(e,t){for(var r=[],n={},s=0;s<t.length;s++){var o=t[s],a=o[0],i={id:e+":"+s,css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(i):r.push(n[a]={id:a,parts:[i]})}return r}},tYwl:function(e,t,r){var n=r("VU/8")(r("/GkV"),r("HYRF"),!1,function(e){r("GxQW")},"data-v-65c43220",null);e.exports=n.exports}});